$.fn.extend({multiPick:function(config){var settings=$.extend({limit:2,image:!1,closeAfterSelect:!0,search:!1,placeholder:"Select",slim:!1},config);let item=$(this),id=$(this).prop("id");$("#id").change(()=>{console.log("change")});let options=$(`#${id} option`),itens=$.map(options,(function(option){return option}));var itemFormat="";$.each(itens,(function(i,v){console.log($(v)),!0===settings.image?itemFormat+=`<div class="option-item" data-value="${$(v).val()}" id="${$(v).text()}">        \n                                    <div class="image" style="background-image: url(${$(v).data("img")})" data-image="${$(v).data("img")}"></div>\n                                ${$(v).text()}\n                            </div>`:itemFormat+=`<div class="option-item" data-value="${$(v).val()}" id="${$(v).text()}">\n                                ${$(v).text()}\n                            </div>`}));var search="";!0===settings.search&&(search='<div class="option-item select" id="search">\n                        <input type="text" class="form-control" id="form-search" placeholder="Search">\n                    </div>');var slim="";function placeHide(){0===$(`#${id}`).find(".main-content .selected-itens .item").length?$(`#${id}`).find(".main-content span").css("display","block"):$(`#${id}`).find(".main-content span").css("display","none")}!0===settings.slim&&(slim="slim"),$(item).parent().prepend(`<div class="mutiple-select ${slim}" id="${id}">\n                <div class="main-content">\n                    <span>${settings.placeholder}</span>\n                    <div class="selected-itens">                          \n                    </div>\n\n                    <?xml version="1.0" encoding="utf-8"?>\n                    \x3c!-- Generator: Adobe Illustrator 24.2.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n                    <svg version="1.1" id="chevron" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                        viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve">                                          \n                    <path class="st1" d="M19.24,5.82c-0.34-0.34-0.9-0.34-1.24,0l-7.65,7.65c-0.24,0.24-0.62,0.24-0.86,0L1.83,5.82\n                        c-0.34-0.34-0.9-0.34-1.24,0c-0.34,0.34-0.34,0.9,0,1.24l8.35,8.35c0.54,0.54,1.4,0.54,1.94,0l8.35-8.35\n                        C19.58,6.72,19.58,6.16,19.24,5.82z"/>\n                    </svg>\n\n                </div>\n\n                <div class="itens-list" style="display: none;">\n                    ${search}\n                    ${itemFormat}\n                </div>\n            </div>`),$(window).click((function(e){$(".mutiple-select .itens-list").slideUp("fast")})),$(document).ready((function(){$(`#${id}`).click((function(e){e.stopPropagation(),$(`.mutiple-select:not(#${id}) .itens-list`).slideUp("fast"),$(`#${id}`).find(".itens-list").slideToggle("fast")})),$(`#${id}`).find(".option-item").click((function(e){e.stopPropagation();let Imagem=$(this).find(".image").data("image"),text=$(this).text(),value=$(this).data("value"),itens=$(`#${id}`).find(".main-content .selected-itens .item"),same=!1;for(var i=0;i<itens.length;i++){let item=itens[i];value==$(item).data("value")&&(same=!0)}let imageblock="";!0===settings.image&&(imageblock=`<div class="image" style="background-image: url(${Imagem})"></div>`),"search"!==$(this).prop("id")&&itens.length<settings.limit&&!1===same&&($(`#${id}`).find(".selected-itens").append(`<div class="item" data-value="${value}">\n                                                            ${imageblock}\n                                                            ${text}\n                                                            <button type="button" class="btn-remove">\n\n                                                                <?xml version="1.0" encoding="utf-8"?>\n                                                                \x3c!-- Generator: Adobe Illustrator 24.2.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n                                                                <svg version="1.1" id="Camada_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                                                                    viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve">\n                                                                <style type="text/css">\n                                                                    .st0{fill:#FFFFFF;}\n                                                                </style>\n                                                                <g>\n                                                                    <path class="st0" d="M19.2,0.8L19.2,0.8c-0.63-0.63-1.66-0.63-2.3,0L10,7.7L3.1,0.8c-0.63-0.63-1.66-0.63-2.3,0l0,0\n                                                                        c-0.63,0.63-0.63,1.66,0,2.3L7.7,10l-6.9,6.9c-0.63,0.63-0.63,1.66,0,2.3l0,0c0.63,0.63,1.66,0.63,2.3,0l6.9-6.9l6.9,6.9\n                                                                        c0.63,0.63,1.66,0.63,2.3,0l0,0c0.63-0.63,0.63-1.66,0-2.3L12.3,10l6.9-6.9C19.83,2.47,19.83,1.44,19.2,0.8z"/>\n                                                                </g>\n                                                                </svg>\n                                                            \n                                                            </button>\n                                                        </div>`),!0===settings.closeAfterSelect&&$(`#${id}`).find(".itens-list").slideToggle(),$(`#${id}`).find(".btn-remove").click((function(e){e.stopPropagation(),$(this).parent().remove(),placeHide()}))),placeHide()})),$(this).find(".option-item.select").click((function(e){e.stopPropagation()})),$("#form-search").on("keyup",(function(){let options=$(`#${id}`).find(".option-item");if($(`#${id}`).find("#form-search").val().length>0)for(var i=0;i<options.length;i++){let option=options[i];console.log(option);var nome=$(option).prop("id"),expressao;new RegExp(this.value,"i").test(nome)?"search"!==nome&&$(option).css("display","flex"):"search"!==nome&&$(option).css("display","none")}else for(var i=0;i<options.length;i++){let option=options[i];"search"!==nome&&$(option).css("display","flex")}}))})),$(this).remove()},getMultiSelect:function(){let idItem=$(this).prop("id");var value=[];let itens=$(`#${idItem}`).find(".main-content .selected-itens .item");for(var i=0;i<itens.length;i++){let item=itens[i];value.push($(item).data("value"))}return value}});